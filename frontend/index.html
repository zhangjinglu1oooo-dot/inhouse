<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Inhouse 前端门户</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <h1>Inhouse 前端门户（前后端分离示例）</h1>
    <p>通过此页面直接调用各微服务 API。</p>
    <label class="api-base">
      API 基础地址：
      <input id="apiBase" type="text" value="http://localhost:8080" />
    </label>
  </header>

  <main>
    <section class="panel">
      <h2>IAM 用户管理</h2>
      <form id="userForm">
        <input name="username" placeholder="用户名" required />
        <input name="password" placeholder="密码" required />
        <input name="displayName" placeholder="展示名称" />
        <button type="submit">创建用户</button>
      </form>
      <button id="loadUsers">加载用户列表</button>
      <pre id="userList" class="output"></pre>
    </section>

    <section class="panel">
      <h2>IAM 登录</h2>
      <form id="loginForm">
        <input name="username" placeholder="用户名" required />
        <input name="password" placeholder="密码" required />
        <button type="submit">登录并获取 Token</button>
      </form>
      <pre id="loginResult" class="output"></pre>
    </section>

    <section class="panel">
      <h2>权限策略</h2>
      <form id="policyForm">
        <input name="app" placeholder="应用名称" required />
        <input name="feature" placeholder="功能点" required />
        <input name="effect" placeholder="allow/deny" value="allow" />
        <button type="submit">创建策略</button>
      </form>
      <button id="loadPolicies">加载策略列表</button>
      <pre id="policyList" class="output"></pre>
    </section>

    <section class="panel">
      <h2>应用注册</h2>
      <form id="appForm">
        <input name="name" placeholder="应用名称" required />
        <input name="version" placeholder="版本" />
        <input name="entryUrl" placeholder="入口地址" />
        <button type="submit">注册应用</button>
      </form>
      <button id="loadApps">加载应用列表</button>
      <pre id="appList" class="output"></pre>
    </section>

    <section class="panel">
      <h2>事件中心</h2>
      <form id="eventForm">
        <input name="topic" placeholder="事件主题" required />
        <input name="payload" placeholder='负载 JSON，例如 {"key":"value"}' />
        <button type="submit">发布事件</button>
      </form>
      <button id="loadEvents">加载事件列表</button>
      <pre id="eventList" class="output"></pre>
    </section>

    <section class="panel">
      <h2>审计日志</h2>
      <form id="auditForm">
        <input name="action" placeholder="动作" required />
        <input name="actor" placeholder="操作人" required />
        <input name="target" placeholder="目标" />
        <input name="detail" placeholder='详情 JSON，例如 {"ip":"127.0.0.1"}' />
        <button type="submit">记录审计</button>
      </form>
      <button id="loadAudits">加载审计列表</button>
      <pre id="auditList" class="output"></pre>
    </section>
  </main>

  <footer>
    <p>建议通过网关访问权限校验接口，其他服务可直接访问各自端口。</p>
  </footer>

  <script src="app.js"></script>
</body>
</html>
